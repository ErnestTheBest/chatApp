!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var o=n(2);function r(e,t){e.className="status",e.classList.add("status-".concat(Object(o.a)(t)))}function i(e){var t=e.querySelectorAll("input"),n=e.querySelectorAll("button");t.forEach(function(e){return e.removeAttribute("disabled")}),n.forEach(function(e){return e.removeAttribute("disabled")})}function c(e){var t=e.querySelectorAll("input"),n=e.querySelectorAll("button");t.forEach(function(e){e.disabled=!0}),n.forEach(function(e){e.disabled=!0})}},function(e,t,n){"use strict";function o(){var e=window.location.pathname;window.sessionStorage.getItem("userId")?(e.includes("/index.html")||e.includes("/register.html"))&&window.location.replace("./chat.html"):e.includes("/index.html")||e.includes("/register.html")||window.location.replace("./index.html")}function r(){window.sessionStorage.removeItem("userId"),window.sessionStorage.removeItem("credentials"),window.sessionStorage.removeItem("chatContextId"),window.sessionStorage.removeItem("chatUpdates"),window.sessionStorage.removeItem("chatContextName"),window.sessionStorage.removeItem("userStatuses"),o()}function i(e,t,n){window.sessionStorage.setItem("userId",e),window.sessionStorage.setItem("credentials",window.btoa("".concat(t,":").concat(n)))}function c(e,t){window.sessionStorage.setItem("chatContextId",e),window.sessionStorage.setItem("chatContextName",t)}function u(e){window.sessionStorage.setItem("userStatuses",e)}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return u})},function(e,t,n){"use strict";function o(e){var t=new Date,n=[],o=!0,r=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var a=c.value;if(a.seen_at){var s=t-new Date(a.seen_at);s<18e4?n.push([a.id,"online"]):s<36e4?n.push([a.id,"away"]):n.push([a.id,"offline"])}else n.push([a.id,"offline"])}}catch(e){r=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}return n}function r(e){var t=JSON.parse(window.sessionStorage.userStatuses),n=!0,o=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value;if(e==u[0])return u[1]}}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}}n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return a});var o="https://ernestthebest.herokuapp.com";function r(){return window.fetch("".concat(o,"/users"),{headers:{Authorization:"Basic ".concat(window.sessionStorage.credentials)}}).then(function(e){return e.json()})}function i(e,t){return window.fetch("".concat(o,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(function(e){return e.json()})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return window.fetch("".concat(o,"/users/").concat(window.sessionStorage.userId),{method:"PUT",headers:{Authorization:"Basic ".concat(window.sessionStorage.credentials),"Content-Type":"application/json"},body:JSON.stringify({name:e,password:t})}).then(function(e){return e.ok})}function u(e,t){return window.fetch("".concat(o,"/me"),{headers:{Authorization:"Basic ".concat(window.btoa("".concat(e,":").concat(t)))}}).then(function(e){return e.json()})}function a(){return window.fetch("".concat(o,"/me"),{headers:{Authorization:"Basic ".concat(window.sessionStorage.credentials)}}).then(function(e){return console.log(e),e.json()})}},function(e,t,n){"use strict";function o(e,t){var n;document.querySelector(".error-message")?n=document.querySelector(".error-message"):(n=document.createElement("div"),document.body.appendChild(n),n.addEventListener("click",function(e){document.body.removeChild(document.querySelector(".error-message"))})),n.textContent=e,n.style.background=t,n.classList.add("error-message")}n.d(t,"a",function(){return o})},,,function(e,t,n){"use strict";n.r(t);var o,r,i=n(1),c=n(4),u=n(0),a=n(3);function s(){window.location.replace("./chat.html")}Object(i.a)(),o=document.getElementById("userLogin"),r=document.getElementById("display-name"),Object(a.b)().then(function(e){var t=e.data;console.log(t),o.textContent=t.username,t.name&&(r.value=t.name)}),document.getElementById("cancel").addEventListener("click",function(e){e.preventDefault(),s()}),document.addEventListener("submit",function(e){e.preventDefault(),Object(u.a)(document.querySelector("form")),Object(a.e)(document.getElementById("display-name").value).then(function(){Object(c.a)("Display name changed","#82df1b"),setTimeout(s,1500)}),Object(u.b)(document.querySelector("form"))})}]);